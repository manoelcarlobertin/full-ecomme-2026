<div class="bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-6">
  <%= simple_form_for [:admin, user], html: { class: "space-y-6" } do |f| %>

    <% if user.errors.any? %>
      <div class="bg-red-900/50 text-red-200 p-4 rounded mb-4 text-sm">
        <ul class="list-disc pl-5">
          <% user.errors.full_messages.each do |msg| %><li><%= msg %></li><% end %>
        </ul>
      </div>
    <% end %>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <%= f.input :name, label: "Nome Completo", input_html: { class: "input-dark" } %>

      <div class="form-group">
        <label class="block text-sm font-medium text-gray-300 mb-2">ID</label>
        <input type="text" value="<%= user.persisted? ? "##{user.id}" : "Novo" %>" disabled class="input-dark opacity-50 cursor-not-allowed">
      </div>

      <%= f.input :email, label: "E-mail", input_html: { class: "input-dark" } %>

      <%= f.input :profile, 
            collection: User.profiles.keys.map { |k| [k.capitalize, k] }, 
            label: "Perfil de Acesso", 
            include_blank: false,
            input_html: { class: "input-dark" } %>
    </div>

    <div class="border-t border-gray-700 pt-6 mt-2">
      <h3 class="text-lg font-medium text-white mb-4">Segurança</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <%= f.input :password, 
              label: "Senha", 
              hint: ("Deixe em branco para manter a atual" if user.persisted?),
              hint_html: { class: "text-gray-500 text-xs mt-1" },
              input_html: { class: "input-dark" } %>

        <%= f.input :password_confirmation, label: "Confirmar Senha", input_html: { class: "input-dark" } %>
      </div>
    </div>

    <div class="flex justify-end gap-3 pt-6 border-t border-gray-700 mt-6">
      <%= link_to "Cancelar", admin_users_path, class: "btn-secondary" %>
      <%= f.button :submit, user.new_record? ? "Adicionar Usuário" : "Salvar Alterações", class: "btn-primary" %>
    </div>
  <% end %>
</div>